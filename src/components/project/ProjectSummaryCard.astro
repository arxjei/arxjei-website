---
import type { CollectionEntry } from "astro:content";
import { Pill, Button } from "@eliancodes/brutal-ui";
import SummaryCard from "@components/generic/SummaryCard.astro";
import CustomBrutalPill from "@components/home/CustomBrutalPill.astro";
import CustomBrutalButton from "@components/home/CustomBrutalButton.astro";

interface Props {
	project: CollectionEntry<"project">;
}

const { project } = Astro.props;
const { default: techStack } = await import("@data/misc/tech-stack.json");
---

<div
	class="w-full sm:w-[calc(50%-1rem)] lg:w-[calc(33.333%-1.334rem)] xl:w-[calc(25%-1.5rem)]">
</div>
<SummaryCard
	title={project.data.title}
	imgAlt={project.data.title}
	imgSrc={project.data.imgUrl}
	description={project.data.description}>
	<div class="flex justify-end my-4">
		<CustomBrutalButton href={`/project/${project.id}/`}>
			Read more &rarr;
		</CustomBrutalButton>
	</div>

	<div class="hidden sm:inline-block">
		<p class="poppins t-2">tags:</p>
		<div class="flex justify-between items-center">
			<ul class="flex flex-wrap gap-4 mt-2">
				{
					project.data.tags.map((tag) => {
						return (
							<li>
								<a
									class="sanchez"
									href={`/project/tags/${tag.toLowerCase()}/`}>
									{(() => {
										const tech = techStack.find((t) => t.id === tag);
										return tech ? (
											<CustomBrutalPill
												color={tech.color}
												class="flex justify-center items-center gap-2">
												<i class={tech.logo} />
												{tech.name}
											</CustomBrutalPill>
										) : (
											<CustomBrutalPill class="poppins">
												{tag}
											</CustomBrutalPill>
										);
									})()}
								</a>
							</li>
						);
					})
				}
			</ul>
			{
				project.data.draft && (
					<span class="bg-green rounded-full border-2 py-1 px-4 text-sm border-black card-shadow">
						Draft
					</span>
				)
			}
		</div>
	</div>
</SummaryCard>
